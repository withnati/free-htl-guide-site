<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Processing — Core Module | Free HTL Guide</title>
  <meta name="description" content="Processing core module for ASCP HT/HTL: dehydration, clearing, paraffin infiltration, schedules, QC, troubleshooting, and a 15-question quiz."/>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{ --brand:#0F4C81; --text:#1E293B; }
    .pill{ padding:.15rem .5rem; border-radius:999px; background:#EEF2FF; color:#1E3A8A; font-size:.8rem; }
    .k{ background:#F1F5F9; padding:.15rem .4rem; border-radius:.375rem; }
    .table{ border-collapse: collapse; width: 100%; }
    .table th,.table td{ border:1px solid #E5E7EB; padding:.6rem; vertical-align:top; }
    .table th{ background:#F8FAFC; font-weight:700; }
    fieldset.correct{ background:#ECFDF5; }
    fieldset.incorrect{ background:#FEF2F2; }
    @media print{ header,nav,footer,.btn{ display:none !important; } main{ max-width:100% !important; } }
    .btn{ display:inline-flex; align-items:center; gap:.5rem; padding:.6rem 1rem; border-radius:.75rem; font-weight:600; }
    .btn-brand{ background:var(--brand); color:#fff; }
    .btn-ghost{ border:1px solid #CBD5E1; }
  </style>
</head>
<body class="antialiased text-[color:var(--text)]">
  <!-- Header -->
  <header class="border-b bg-white/90 backdrop-blur">
    <div class="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between">
      <a href="../index.html" class="font-bold text-lg text-[color:var(--brand)]">Free HTL Guide</a>
      <nav class="hidden md:flex gap-6 text-sm">
        <a class="hover:text-[color:var(--brand)]" href="../index.html#syllabus">Syllabus</a>
        <a class="hover:text-[color:var(--brand)]" href="../index.html#waitlist">Waitlist</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-slate-50 border-b">
    <div class="max-w-6xl mx-auto px-4 py-8 grid md:grid-cols-2 gap-8">
      <div>
        <p class="uppercase tracking-wide text-xs text-slate-500">Module • Core</p>
        <h1 class="text-3xl md:text-4xl font-extrabold mt-1">Processing</h1>
        <p class="mt-3 text-slate-700">
          Dehydration → Clearing → Paraffin infiltration. Learn schedules, reagent choices, carryover control, and troubleshooting to produce strong H&amp;E and downstream IHC/ISH results.
        </p>
        <div class="mt-4 flex flex-wrap gap-2 text-xs">
          <span class="pill">Bench skills</span><span class="pill">QC &amp; logs</span><span class="pill">Quiz: 15 Q</span>
        </div>
      </div>
      <div class="hidden md:block">
        <img src="../Microtome.jpg" alt="Processing workflow" class="rounded-xl border shadow-sm w-full object-cover h-56 md:h-64">
      </div>
    </div>
  </section>

  <!-- Main -->
  <main class="max-w-6xl mx-auto px-4 py-10 grid lg:grid-cols-[1fr,320px] gap-10">
    <!-- Article -->
    <article class="prose max-w-none">
      <h2 class="text-2xl font-bold">Learning objectives</h2>
      <ul class="mt-2">
        <li>Describe the goals and sequence of <b>dehydration → clearing → infiltration</b>.</li>
        <li>Choose appropriate <b>reagents/temps/times</b> for tissue types (fatty, dense, delicate, calcified).</li>
        <li>Implement <b>carryover control</b> (two absolutes/two clearants) and reagent rotation.</li>
        <li>Troubleshoot <b>soft blocks, brittleness, opaque wax, incomplete infiltration</b>.</li>
        <li>Document with <b>rotation logs, lots, temps, actions</b> and validate changes.</li>
      </ul>

      <h2 class="text-2xl font-bold mt-10">Workflow summary</h2>
      <ul>
        <li><b>Dehydration:</b> graded alcohols remove water (70% → 95% → 100% ×2).</li>
        <li><b>Clearing:</b> xylene or substitute replaces alcohol (often ×2 stations).</li>
        <li><b>Infiltration:</b> paraffin (MP usually <b>56–60 °C</b>), often ×2–3 baths; vacuum helps fatty/dense tissue.</li>
      </ul>

      <h2 class="text-2xl font-bold mt-10">Schedules (templates)</h2>
      <div class="overflow-x-auto">
        <table class="table text-sm">
          <thead><tr><th>Tissue</th><th>Alcohols</th><th>Clearant</th><th>Paraffin</th><th>Notes</th></tr></thead>
          <tbody>
            <tr>
              <td>Routine small biopsies</td>
              <td>70% (10–20 m) → 95% (20–30 m) → 100% ×2 (20–30 m)</td>
              <td>Xylene ×2 (15–20 m)</td>
              <td>Paraffin ×2–3 (20–30 m, 56–60 °C)</td>
              <td>Do not overcrowd cassettes; monitor temps.</td>
            </tr>
            <tr>
              <td>Fatty (breast/skin)</td>
              <td>Extend 95% and 100% steps</td>
              <td>Extend clearant; consider vacuum</td>
              <td>Paraffin ×3; vacuum beneficial</td>
              <td>Fat slows diffusion—longer times reduce soft cores.</td>
            </tr>
            <tr>
              <td>Dense/calcified*</td>
              <td>Longer 95% and 100%</td>
              <td>Longer clearant</td>
              <td>Paraffin ×3</td>
              <td>*Prefer EDTA decalc if IHC/ISH planned.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h2 class="text-2xl font-bold mt-10">Reagent choices &amp; carryover control</h2>
      <ul>
        <li><b>Alcohols:</b> ethanol is standard. Two <b>100%</b> stations reduce water carryover.</li>
        <li><b>Clearants:</b> xylene (fast) or substitutes (often require <b>longer times</b>). Ensure paraffin compatibility.</li>
        <li><b>Paraffin:</b> MP ~56–60 °C; avoid overheating &gt;60–62 °C to protect morphology/antigens.</li>
        <li><b>Carryover best practice:</b> Two absolutes + two clearants; maintain <b>fresh/rotation schedule</b> and monitor cloudiness/odor.</li>
      </ul>

      <h2 class="text-2xl font-bold mt-10">QC, logs, and safety</h2>
      <ul>
        <li><b>Rotation log:</b> dates, actions (refresh/replace), lot #s, temperatures, anomalies.</li>
        <li><b>Evidence of exhaustion:</b> cloudy clearant/paraffin, slow processing, soft blocks.</li>
        <li><b>Safety:</b> flammables (alcohols/xylene/substitutes), ventilation, waste handling.</li>
      </ul>

      <h2 class="text-2xl font-bold mt-10">Troubleshooting quick guide</h2>
      <ul>
        <li><b>Soft/spongy block:</b> under-dehydration/clearing → reprocess from 95% → 100% ×2 → clearant ×2 (extended) → paraffin ×2–3.</li>
        <li><b>Brittle/shrunken tissue:</b> over-dehydration/clearing + heat → shorten absolutes/clearant; avoid overheating; consider lower MP wax.</li>
        <li><b>Opaque paraffin around tissue:</b> water carryover → refresh absolutes/clearant; verify two 100% stations are effective.</li>
        <li><b>Poor infiltration in fatty tissue:</b> extend clearant/paraffin; use vacuum; ensure adequate cassettes spacing.</li>
      </ul>

      <h2 class="text-2xl font-bold mt-10">Downloads</h2>
      <p class="text-sm text-slate-600">These links work as soon as you upload the PDFs to <span class="k">/assets/</span>:</p>
      <div class="mt-3 flex flex-wrap gap-3">
        <a class="btn btn-ghost" href="../assets/Processing_Quick_Card.pdf">Quick-card (PDF)</a>
        <a class="btn btn-ghost" href="../assets/Processing_Schedules.pdf">Schedules (PDF)</a>
        <a class="btn btn-ghost" href="../assets/Processing_Troubleshooting.pdf">Troubleshooting (PDF)</a>
        <a class="btn btn-ghost" href="../assets/Reagent_Rotation_Log.pdf">Rotation log (PDF)</a>
        <a class="btn btn-brand" href="../assets/all-processing-downloads.zip">All downloads (ZIP)</a>
      </div>

      <!-- QUIZ -->
      <h2 id="quiz" class="text-2xl font-bold mt-12">Practice quiz (15)</h2>
      <p class="text-sm text-slate-600">Select the best option for each question. Submit to score; Retry clears answers.</p>
      <form id="quizForm" class="mt-4 grid gap-5 max-w-3xl" aria-describedby="quizDesc">
        <p id="quizDesc" class="sr-only">Processing multiple choice questions</p>
        <!-- Rendered by patch script below -->
      </form>
      <div class="mt-3 flex gap-3">
        <button type="button" class="btn btn-brand" onclick="grade()">Submit</button>
        <button type="button" class="btn btn-ghost" onclick="retry()">Retry</button>
      </div>
      <div id="quizResult" class="hidden mt-4 p-4 rounded-xl border" aria-live="polite"></div>

      <div class="mt-10 flex justify-between">
        <a href="./fixation-core-v2.html" class="btn btn-ghost">← Fixation Core</a>
        <a href="./embedding.html" class="btn btn-ghost">Next: Embedding →</a>
      </div>
    </article>

    <!-- Sidebar -->
    <aside class="space-y-4">
      <div class="p-4 rounded-xl border">
        <p class="text-xs font-semibold tracking-wide text-slate-500">ON THIS PAGE</p>
        <ul class="mt-3 space-y-2 text-sm">
          <li><a class="hover:text-[color:var(--brand)]" href="#quiz">Quiz</a></li>
        </ul>
      </div>
      <div class="p-4 rounded-xl border">
        <p class="text-sm text-slate-700">Track progress on this device.</p>
        <button id="doneBtn" class="mt-2 btn btn-ghost w-full">Mark complete</button>
        <p id="doneNote" class="mt-2 text-xs text-slate-500"></p>
      </div>
    </aside>
  </main>

  <footer class="py-10 border-t">
    <div class="max-w-6xl mx-auto px-4 text-slate-600">© <span id="y"></span> Free HTL Guide</div>
  </footer>

  <!-- Minimal helpers -->
  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
    const DONE_KEY='processing_core_done';
    const doneBtn=document.getElementById('doneBtn');
    const doneNote=document.getElementById('doneNote');
    function renderDone(){ const v=localStorage.getItem(DONE_KEY)==='1'; doneBtn.textContent=v?'Completed ✓':'Mark complete'; doneNote.textContent=v?'Saved locally.':''; }
    renderDone();
    doneBtn.addEventListener('click',()=>{ localStorage.setItem(DONE_KEY, localStorage.getItem(DONE_KEY)==='1'?'0':'1'); renderDone(); });
  </script>

  <!-- QUIZ FIX PATCH for Processing: renders questions even if earlier scripts fail -->
  <script>
  (function () {
    function $(id){ return document.getElementById(id); }
    var form = $('quizForm');
    if (!form) return;                 // no quiz form on this page
    if (form.querySelector('fieldset')) return; // already rendered

    var QUESTIONS = [
      ["Primary purpose of dehydration:", ["Remove free water","Replace fat with solvent","Infuse paraffin","Fix nucleic acids"], "A"],
      ["Two 100% alcohol stations primarily reduce:", ["Over-dehydration","Water carryover","Brittleness","Heat damage"], "B"],
      ["Xylene substitutes often require:", ["No clearing steps","Longer times vs xylene","Lower paraffin temps","Skipping 100% alcohol"], "B"],
      ["Typical paraffin melting point range:", ["40-45 °C","50-55 °C","56-60 °C","65-70 °C"], "C"],
      ["Opaque paraffin around tissue suggests:", ["Overheating paraffin","Water carryover","Too much vacuum","Dirty molds"], "B"],
      ["Soft/spongy block likely due to:", ["Under-dehydration/clearing","Over-dehydration","Excess xylene","Low paraffin MP"], "A"],
      ["Brittle/shrunken tissue likely due to:", ["Under-dehydration","Over-clearing and long 100% alcohol","Low bath temperature","Too little vacuum"], "B"],
      ["For fatty tissue you should usually:", ["Shorten clearant steps","Use only one paraffin station","Extend clearant/paraffin, consider vacuum","Skip 70% alcohol"], "C"],
      ["Carryover control best practice:", ["Single 100% alcohol then xylene","Two 100% alcohols and two clearants","Skip 95% alcohol for speed","Reduce agitation"], "B"],
      ["Best immediate fix for soft block:", ["Re-embed without changes","Repeat from 95% alcohol, extend clearant, reinfiltrate","Cool block longer","Change microtome angle"], "B"],
      ["Evidence of reagent exhaustion:", ["Clear, colorless xylene","Alcohol stations reading 0% water","Cloudy clearant or paraffin","Stable processing times"], "C"],
      ["To protect antigens for IHC:", ["Use very hot paraffin >65 °C","Limit over-dehydration and overheating","Switch to methanol for all steps","Always skip vacuum"], "B"],
      ["Dense/calcified tissue needs:", ["Shorter alcohol steps","Longer dehydration/clearing and thin grossing","Fewer paraffin steps","Higher water content"], "B"],
      ["Best practice for logs:", ["No documentation needed","Note only reagent lot numbers","Track rotation dates, lots, temps, actions","Track only xylene"], "C"],
      ["When using substitutes:", ["Assume times equal to xylene","Verify compatibility with paraffin and extend times as needed","Reduce number of stations","Use colder paraffin"], "B"]
    ];

    var EXPL = [
      "Dehydration removes water so clearant and paraffin can replace it.",
      "Two absolutes limit water carryover into clearant/wax.",
      "Most substitutes clear slower; extend times vs xylene.",
      "Common histology waxes: ~56–60 °C.",
      "Water contamination clouds paraffin around tissue.",
      "Insufficient dehydration/clearing leaves tissue soft/spongy.",
      "Excess dehydration/clearing and heat cause brittleness/shrinkage.",
      "Fat benefits from longer clearant/paraffin and vacuum.",
      "Two absolutes + two clearants is standard to limit carryover.",
      "Reprocess: 95% → absolutes → clearant → paraffin with extra time.",
      "Cloudy clearant/paraffin suggests contamination/exhaustion.",
      "Avoid overheating and excessive dehydration for IHC integrity.",
      "Dense tissue needs longer steps and thin grossing.",
      "Logs should record rotation/refresh, lots, temperature, actions.",
      "Times can differ; ensure paraffin compatibility."
    ];

    function renderQuiz(){
      form.innerHTML = "";
      for (var i=0;i<QUESTIONS.length;i++){
        var stem = QUESTIONS[i][0], opts = QUESTIONS[i][1], num = i+1;
        var fs = document.createElement('fieldset'); fs.className = "mt-1";
        var lg = document.createElement('legend'); lg.className = "font-medium"; lg.textContent = num + ") " + stem; fs.appendChild(lg);
        for (var k=0;k<opts.length;k++){
          var id = "q"+num+"_"+k;
          var lab = document.createElement('label'); lab.className = "block mt-1"; lab.setAttribute('for', id);
          var input = document.createElement('input'); input.type="radio"; input.id=id; input.name="q"+num; input.value=String.fromCharCode(65+k);
          lab.appendChild(input); lab.appendChild(document.createTextNode(" "+opts[k]));
          fs.appendChild(lab);
        }
        form.appendChild(fs);
      }
    }
    function buildKey(){ var k={}; for (var i=0;i<QUESTIONS.length;i++){ k["q"+(i+1)] = QUESTIONS[i][2]; } return k; }
    var KEY = buildKey();

    window.grade = function(){
      var sets = form.querySelectorAll('fieldset'), score = 0;
      for (var i=0;i<sets.length;i++){
        var fs = sets[i], correct = KEY["q"+(i+1)];
        fs.classList.remove('correct','incorrect');
        var chosen = fs.querySelector('input:checked');
        if (chosen && chosen.value===correct){ score++; fs.classList.add('correct'); }
        else { fs.classList.add('incorrect'); }
      }
      var pct = Math.round(score/sets.length*100);
      var res = document.getElementById('quizResult');
      if (res){
        res.classList.remove('hidden');
        res.innerHTML = "<strong>Score: "+score+"/"+sets.length+" ("+pct+"%)</strong>"
          + "<div class='mt-2 text-sm text-slate-700'>"
          + EXPL.map(function(e,i){ return "Q"+(i+1)+": "+e; }).join("<br>")
          + "</div>";
        window.scrollTo({ top: res.offsetTop-80, behavior: 'smooth' });
      }
    };

    window.retry = function(){
      renderQuiz();
      var res = document.getElementById('quizResult'); if(res) res.classList.add('hidden');
      var q = document.getElementById('quiz') || form;
      window.scrollTo({ top: q.offsetTop-80, behavior: 'smooth' });
    };

    // Render now + on DOM ready (double safety)
    try { renderQuiz(); } catch(e) { console && console.warn("processing quiz immediate render failed", e); }
    if (document.readyState === 'loading'){
      document.addEventListener('DOMContentLoaded', function(){ try{ renderQuiz(); }catch(e){ console && console.warn("processing quiz DOMContentLoaded render failed", e); } });
    }
  })();
  </script>
</body>
</html>
